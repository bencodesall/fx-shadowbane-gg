[Unit]
Description={{ fx_service_name }} Server
After=network.target
# OnFailure=your-notification-service.target

[Service]
Type=simple
User=fivem
Group=fivem_admins
WorkingDirectory={{ service_dir_fxserver }}/server-data
ExecStart={{ service_dir_fxserver }}/server/run.sh +exec {{ service_dir_fxserver }}/server-data/server.cfg
Restart=on-failure
RestartSec=10
StandardOutput=journal
StandardError=journal
SyslogIdentifier=fivem_{{ environment_name }}

# Limit restarts
StartLimitIntervalSec=600 # 10 minute window
StartLimitBurst=3 # limit to 3 restarts in 10 minutes

[Install]
WantedBy=multi-user.target